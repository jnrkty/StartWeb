<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<script src="//code.jquery.com/jquery-3.3.1.js"></script>
	<title>Document</title>
</head>
<body>
	<div class="div">
		<input type="text" class="inputC"><br>
	</div>
		<button class="add">추가</button>
		<button class="send" >확인</button>
	<script>

		$('.add').click(function(){
			var input = '<input type="text" class="inputC"><br>';
			$('.div').append(input);
		})

	$('.send').click(function(){
		var data = new String(); //data는 문자열을 이용하여 처리
		var data2 = new Array(); //data2는 배열을 이용하여 처리
		
		$('.inputC').each(function(){
			var tmpData = $(this).val();
			if(tmpData != ""){ 
				// data = tmpData 안하는 이유는 덮어쓰기가 아니라 문자열 뒤에 붙여 쓰고 싶어서. 
				data += ','+ tmpData; // = data = data + tmpData
				data2.push(tmpData);
			}
		});

		//문자열을 이용하여 처리하는 방법
		// //첫번째 데이터에 ,을 빼기 위한 작업
		// data = data.substr(1); //ex)',1,2,3,4' -> 0번지는 ,가 되니까 1번지부터 뽑아와서 써옴
		// opener.document.getElementsByClassName('input')[0].value = data; //클래스로 가져오려면 번지수를 지정해야함
		// // 위랑 같은기능 $(opener.document).find('.input').val(data);


		//배열을 이용하여 처리하는 방법
		//join(구분자) : 배열의 각 원소들을 문자열로 바꾸는데 원소들 사이에 구분자를 입력
		$(opener.document).find('.input').val(data2.join(','));
		opener.$('.input').trigger('change');
		// setTimeout('window.close()',1000);
	})
	
			

	</script>
    
</body>
</html>